/* =============  Perfil de Usuario (Gifter's)  ============= */
:root{
  --brand:#4D6BFF; --brand-dark:#3f59db; --brand-100:#eaf0ff;
  --ink:#1f2533; --muted:#8a93a6; --line:#dfe6f3;
  --card:#ffffff; --bg:#eff4fa; --shadow:0 10px 28px rgba(17,24,39,.08);
  --radius-lg:18px; --radius-md:14px; --radius-sm:10px;
}

.profile-header,.profile-content{max-width:1040px;margin:0 auto;padding:0 18px}

/* Banner */
.profile-header{
  margin-top:18px;
  border-radius:var(--radius-lg);
  overflow:hidden;
  background:linear-gradient(180deg,var(--brand) 0%,#5f7aff 100%);
  color:#fff;
  box-shadow:var(--shadow)
}
.profile-header::after{
  content:"";
  display:block;
  height:2px;
  width:75%;
  margin:22px auto 0;
  background:rgba(255,255,255,.35);
  border-radius:2px
}

.profile-info{
  display:grid;
  grid-template-columns:96px 1fr auto;
  gap:18px;
  align-items:center;
  padding:22px
}

/* Avatar limpio */
.avatar{
  width:96px;
  height:96px;
  border-radius:50%;
  background:transparent;       /* antes tenía blanco */
  display:inline-block;
  overflow:hidden;
}
.avatar img{
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
}

.user-details h2{
  margin:0 0 4px;
  font-weight:700;
  font-size:36px;
  line-height:1.1
}
.user-details .description{
  margin:0;
  font-weight:300;
  font-size:14px;
  opacity:.95
}

.edit-profile .btn-edit{
  border:none;
  background:#fff;
  color:var(--brand-dark);
  font-weight:600;
  padding:10px 18px;
  border-radius:999px;
  box-shadow:0 4px 10px rgba(0,0,0,.08);
  cursor:pointer;
  transition:transform .06s ease,box-shadow .2s ease
}
.edit-profile .btn-edit:hover{transform:translateY(-1px)}
.edit-profile .btn-edit:active{transform:translateY(0)}

/* Tabs */
.profile-nav{padding:0 22px 10px}
.profile-nav ul{
  list-style:none;
  margin:0;
  padding:0;
  display:flex;
  gap:26px;
  align-items:center;
  overflow:auto
}
.profile-nav a{
  display:inline-block;
  padding:12px 0 14px;
  color:#e8edff;
  text-decoration:none;
  font-weight:500;
  position:relative;
  white-space:nowrap
}
.profile-nav a.active,.profile-nav a:hover{color:#fff}
.profile-nav a.active::after,.profile-nav a:hover::after{
  content:"";
  position:absolute;
  left:0;right:0;bottom:0;
  height:3px;
  background:#fff;
  border-radius:3px
}

/* Contenido */
.profile-content{margin-top:22px;margin-bottom:60px}
.profile-content h3{
  text-align:center;
  font-size:22px;
  color:var(--ink);
  font-weight:700;
  margin:22px 0 28px;
  position:relative
}
.profile-content h3::before,.profile-content h3::after{
  content:"";
  position:absolute;
  top:50%;
  width:160px;
  height:2px;
  background:var(--line)
}
.profile-content h3::before{left:calc(50% - 160px - 12ch)}
.profile-content h3::after{right:calc(50% - 160px - 12ch)}

/* Grid y cards */
.gift-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:26px}
.gift-card{
  background:var(--card);
  border-radius:var(--radius-md);
  box-shadow:var(--shadow);
  overflow:hidden;
  display:flex;
  flex-direction:column
}
.gift-card>img{
  width:100%;
  height:140px;
  object-fit:cover;
  display:block;
  filter:saturate(.98)
}
.gift-info{
  padding:12px 16px;
  border-bottom:1px solid var(--line)
}
.gift-info h4{
  margin:0 0 4px;
  font-size:16px;
  color:#2b3247;
  font-weight:600
}
.gift-info p{
  margin:0;
  font-size:13px;
  color:var(--muted);
  font-weight:500
}
.gift-actions{
  display:flex;
  justify-content:flex-end;
  gap:10px;
  padding:10px 12px 12px
}
.gift-actions button{
  width:34px;
  height:34px;
  border-radius:50%;
  border:1px solid var(--line);
  background:#fff;
  color:#5a6483;
  font-size:16px;
  line-height:1;
  display:grid;
  place-items:center;
  cursor:pointer;
  transition:background .2s ease,transform .06s ease,border-color .2s ease
}
.gift-actions button:hover{background:var(--brand-100);border-color:#c9d6ff}
.gift-actions button:active{transform:translateY(1px)}

/* Responsive */
@media (max-width:1024px){.gift-grid{grid-template-columns:repeat(2,1fr)}}
@media (max-width:720px){
  .profile-info{grid-template-columns:72px 1fr}
  .edit-profile{grid-column:1 / -1}
  .avatar{width:72px;height:72px}
  .user-details h2{font-size:28px}
}
@media (max-width:560px){
  .gift-grid{grid-template-columns:1fr}
  .profile-content h3::before,.profile-content h3::after{display:none}
}

/* Forzar el nombre a blanco dentro del banner */
.profile-header .user-details h2,
.profile-header .user-details .description {
  color: #fff;
}

/* Tabs */
.tab-content { display: none; }
.tab-content.active { display: block; }

/* Reducir espacio entre tabs y el título del contenido */
.tab-content h3 { margin-top: 0px; }
.profile-content { margin-top: 0px; }

/* ===== Eventos importantes ===== */
.events-list{
  display:flex;
  flex-direction:column;
  gap:16px;
  margin-top:16px;
}
.event-item{
  position:relative;
  padding:10px 12px;
  border-radius:20px;
  box-shadow: 0 12px 28px rgba(0,0,0,.08);
}
.event-bar{
  height:46px;
  width:100%;
  background: #4D6BFF;
  border-radius:999px;
  position:relative;
  overflow:hidden;
}
.event-name{
  position:absolute;
  left:190px;
  top:50%;
  transform:translateY(-50%);
  color:#fff;
  font-weight:600;
  letter-spacing:.2px;
}
.event-date{
  position:absolute;
  left:16px;
  top:50%;
  transform:translateY(-50%);
  background:#3f59db;
  color:#fff;
  font-weight:700;
  padding:10px 16px;
  border-radius:999px;
  min-width:150px;
  text-align:center;
  z-index:1;
}
.event-edit{
  position:absolute;
  right:16px;
  top:50%;
  transform:translateY(-50%);
  width:36px; height:36px;
  border-radius:999px;
  border:none;
  background:#3f59db;
  color:#fff;
  display:grid; place-items:center;
  cursor:pointer;
  transition: background .2s ease, transform .06s ease;
  z-index:1;
}
.event-edit:hover{ background:#2f49c9; }
.event-edit:active{ transform:translateY(-50%) scale(.98); }
@media (max-width:720px){
  .event-bar{ height:44px; }
  .event-date{ min-width:124px; padding:8px 12px; left:12px; }
  .event-name{ left:152px; font-weight:600; }
  .event-edit{ right:12px; width:34px; height:34px; }
}
.events-list .event-item:nth-child(even) .event-bar{ background:#819cfd; }

/* ===== OVERRIDES DUROS PARA EL AVATAR EN EL BANNER ===== */
.profile-header .avatar{
  width: 96px !important;
  height: 96px !important;
  border-radius: 50% !important;
  overflow: hidden !important;
  background: transparent !important;   /* sin fondo blanco */
  display: inline-block !important;
  border: 0 !important;
}

.profile-header .avatar img{
  width: 100% !important;
  height: 100% !important;
  object-fit: cover !important;
  display: block !important;

  /* anula cualquier efecto raro de otros css */
  filter: none !important;
  mix-blend-mode: normal !important;
  background: transparent !important;
  -webkit-mask-image: none !important;
  mask-image: none !important;
}
/* por si algún CSS global daba fondo semiblanco a .avatar */
.avatar { background: transparent !important; }


/* Avatar con background-image */
.avatar-img{
  width: 96px;
  height: 96px;
  border-radius: 50%;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  display: block; /* asegura que pinte el área */
}

/* --- Avatar en el banner, por encima de cualquier overlay --- */
.profile-header { position: relative; }
.profile-header .profile-info { position: relative; z-index: 2; }

/* El <img> del avatar con z-index explícito */
.profile-header .avatar { position: relative; z-index: 3; }
.profile-header .avatar img{
  width:96px;height:96px;border-radius:50%;
  object-fit:cover;display:block;
  opacity:1 !important; filter:none !important;
  mix-blend-mode:normal !important; background:transparent !important;
}

/* Avatar del banner: gana a todo y evita overlays */
.profile-header { position: relative; }
.profile-header .profile-info { position: relative; z-index: 2; }

.avatar--banner{
  width:96px; height:96px;
  border-radius:50%;
  background-size:cover;
  background-position:center;
  background-repeat:no-repeat;
  display:inline-block;
  position:relative;
  z-index:3;                 /* por encima de cualquier pseudo/overlay */
  opacity:1 !important;
  filter:none !important;
  mix-blend-mode:normal !important;
  -webkit-mask-image:none !important;
  mask-image:none !important;
  visibility:visible !important;
}

/* Evitar overlays del banner */
.profile-header { position: relative; }
.profile-header .profile-info { position: relative; z-index: 2; }

/* Avatar del banner “a prueba de todo” */
.avatar--banner{
  width:96px; height:96px;
  border-radius:50%;
  background-size:cover;
  background-position:center;
  background-repeat:no-repeat;
  display:inline-block;
  position:relative;
  z-index:3;                 /* por encima de cualquier pseudo/overlay */
  opacity:1 !important;
  filter:none !important;
  mix-blend-mode:normal !important;
  -webkit-mask-image:none !important;
  mask-image:none !important;
  visibility:visible !important;
}

/* (seguridad extra) por si algún pseudo del banner intercepta clics */
.profile-header::after{ pointer-events:none; }


/* Banner: asegura orden de apilado y evita overlays */
.profile-header { position: relative; }
.profile-header .profile-info { position: relative; z-index: 2; }

/* Avatar del banner, una sola versión */
.avatar--banner{
  width:96px; height:96px;
  border-radius:50%;
  background-size:cover;
  background-position:center;
  background-repeat:no-repeat;
  display:inline-block;
  position:relative;
  z-index:3;
  opacity:1 !important;
  filter:none !important;
  mix-blend-mode:normal !important;
  -webkit-mask-image:none !important;
  mask-image:none !important;
  visibility:visible !important;
}

/* Evita que un pseudo del banner capture eventos encima */
.profile-header::after{ pointer-events:none; }

/* --- PRIORIDAD Y APILADO DEL BANNER --- */
.profile-header { position: relative; }
.profile-header .profile-info { position: relative; z-index: 2; }
.profile-header::after { pointer-events: none; }

/* --- AVATAR (funciona con <img>) --- */
.profile-header .avatar{
  width:96px;
  height:96px;
  border-radius:50%;
  overflow:hidden;
  background:transparent;
  display:inline-block;
  position:relative;
  z-index:3;
}
.profile-header .avatar img{
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
  opacity:1 !important;
  filter:none !important;
  mix-blend-mode:normal !important;
  -webkit-mask-image:none !important;
  mask-image:none !important;
  visibility:visible !important;
}

/* ===== Fix definitivo banner + avatar ===== */
.profile-header { position: relative; }
.profile-header .profile-info { position: relative; z-index: 2; }
.profile-header::after { pointer-events: none; }

/* Avatar namespaced: evita conflictos con .avatar de otros CSS */
.g-avatar{
  width:96px; height:96px;
  border-radius:50%;
  display:inline-block;
  overflow:hidden;
  background:transparent;
  position:relative;
  z-index:3;
}

/* Pintado por background, no depende de <img> */
.g-avatar--banner{
  background-size:cover;
  background-position:center;
  background-repeat:no-repeat;
  opacity:1 !important;
  filter:none !important;
  mix-blend-mode:normal !important;
  -webkit-mask-image:none !important;
  mask-image:none !important;
  visibility:visible !important;
}

/* Botón redondeado pequeño */
.btn-rounded-sm {
  border-radius: 999px;
  width: 36px; height: 36px; line-height: 20px;
  padding: 0; display: inline-flex; align-items: center; justify-content: center;
  font-size: 22px;
}


/* Items de evento (si no lo tenías) */
.event-item {
  background: #3f66ff11; border-radius: 12px; padding: 12px 14px; margin-bottom: 10px;
}
/* Header */
.events-header{
  display:flex; align-items:center; justify-content:space-between;
  margin-bottom:8px;
}
.btn-rounded-sm{
  border-radius:999px; width:36px; height:36px; padding:0;
  display:inline-flex; align-items:center; justify-content:center; font-size:22px;
}

/* Panel colapsable robusto (sin height:auto) */
.collapse-panel{
  overflow:hidden;
  max-height:0; opacity:0; transform:translateY(-6px);
  transition:max-height 220ms ease, opacity 180ms ease, transform 180ms ease;
  will-change:max-height, opacity, transform;
  margin-bottom:0; /* se expande limpio */
}
.collapse-panel.open{
  opacity:1; transform:translateY(0);
  margin-bottom:12px;
}

/* Form grid */
.events-form{
  background:#fff; border:1px solid #e6e9f2; border-radius:12px;
  padding:12px; display:grid; gap:10px;
  grid-template-columns: 180px 1fr 1.2fr 120px;
  align-items:stretch;
}
.events-form .field .form-control,
.events-form .field input[type="date"],
.events-form .field textarea{
  width:100%;
}
@media (max-width: 920px){
  .events-form{ grid-template-columns: 1fr 1fr; }
  .events-form .field.action{ grid-column: 1 / -1; }
}

/* Lista de eventos */
.events-list .event-item{
  display:flex; align-items:center; justify-content:space-between;
  background:#3f66ff11; border-radius:12px; padding:12px 14px; margin-bottom:10px;
}
.event-item .left{ display:flex; align-items:center; gap:12px; }
.event-item .badge{ background:#3f66ff; color:#fff; padding:6px 10px; border-radius:999px; font-weight:600; }
.event-item .name{ font-weight:600; }

.icon-btn{
  display:inline-flex; align-items:center; justify-content:center;
  border:1px solid #cfd6ff; padding:6px 10px; border-radius:10px; text-decoration:none;
}
.icon-btn.danger{ border-color:#ffcccc; }
.inline-form{ display:inline; margin:0; }

/* Apariencia azul del bloque de eventos */
.events-list .event-item{
  display:flex; align-items:center;
  background: var(--brand-100);      /* azul claro */
  border-radius: 14px; padding: 12px 14px; margin-bottom: 12px;
  box-shadow: 0 10px 24px rgba(17,24,39,.06);
}

/* Contenido */
.event-item .left{
  display:flex; align-items:center; gap:12px; min-width:0;
}
.event-item .badge{
  background: var(--brand-dark); color:#fff;
  padding:6px 10px; border-radius:999px; font-weight:600;
}
.event-item .name{
  font-weight:700; color: var(--brand); /* texto azul */
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}

/* Acciones totalmente a la derecha */
.event-item .right{
  margin-left:auto; display:flex; align-items:center; gap:10px;
}

/* Enlace de editar (puro a la derecha) */
.edit-link{
  display:inline-flex; align-items:center; justify-content:center;
  width:36px; height:36px; border-radius:10px;
  border:1px solid #cfd6ff; color: var(--brand-dark);
  text-decoration:none; font-size:18px;
}

/* Botón de texto "Eliminar" con letras azules */
.delete-link{
  background:transparent; border:none;
  color: var(--brand-dark); font-weight:700; cursor:pointer;
  padding:8px 10px; border-radius:8px;
}
.delete-link:hover{ text-decoration:underline; }

/* (por si alguna regla anterior lo sobrescribe) */
.icon-btn{ display:none; } /* ocultamos estilos viejos de icono */

/* === Eventos: título centrado y botón a la derecha === */
.events-header{
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;   /* centra el h3 */
  margin-bottom: 8px;        /* conserva el espaciado */
}
.events-header h3{
  margin: 0;
  text-align: center;
}
#btn-toggle-nuevo-evento{
  position: absolute;
  right: 0;
  top: 50%;
  transform: translateY(-50%);
}

/* === Quitar las líneas decorativas de los títulos del contenido === */
.profile-content h3::before,
.profile-content h3::after{
  display: none !important;
}

/* (Opcional) Quitar la línea semitransparente del banner */
.profile-header::after{
  display: none !important;
}
/* === Panel de descripción del evento === */
.event-item { position: relative; }

/* contenedor colapsable */
.event-desc{
  overflow: hidden;
  max-height: 0;
  opacity: 0;
  transform: translateY(-4px);
  transition: max-height 220ms ease, opacity 160ms ease, transform 160ms ease;
  will-change: max-height, opacity, transform;
  margin-top: 8px;            /* aparece bajo la fila */
  background: #fff;
  border: 1px solid #e6e9f2;
  border-left: 4px solid var(--brand);
  border-radius: 12px;
  box-shadow: 0 8px 20px rgba(17,24,39,.06);
  padding: 0 12px;            /* se habilita al abrir */
}

/* estado abierto */
.event-desc.open{
  opacity: 1;
  transform: translateY(0);
  padding: 12px;              /* padding visible ya abierto */
}

/* tipografía y espaciado del texto */
.event-desc p{
  margin: 0;
  color: var(--ink);
  line-height: 1.45;
}

/* hace “clickeable” el lado izquierdo (fecha + nombre) */
.event-toggle{
  cursor: pointer;
  user-select: none;
}

/* feedback al hover/focus del área clickeable */
.event-toggle:hover .name{ text-decoration: underline; }
.event-toggle:focus{ outline: none; }
.event-toggle:focus .name{
  box-shadow: 0 0 0 3px #cfe0ff;
  border-radius: 6px;
}
/* Mantener centrado + botón a la derecha (como ya lo tenías) */
.events-header{
  display:grid;
  grid-template-columns: 1fr auto 1fr;
  align-items:center;
  gap:.5rem;
  margin-bottom:.75rem;
}
.events-header h3{ grid-column:2; justify-self:center; margin:0; text-align:center; }
.events-header #btn-toggle-nuevo-evento{ grid-column:3; justify-self:end; }

/* Badge azul legible (como antes) */
.events-list .badge{
  display:inline-block;
  font-size:.875rem;
  background:#E7F1FF;        /* azul muy claro de fondo */
  color:#0D6EFD;             /* azul Bootstrap para el texto */
  border:1px solid #CFE2FF;  /* borde suave */
  padding:.25rem .5rem;
  border-radius:8px;
}
.events-header{
  display:grid; grid-template-columns:1fr auto 1fr; align-items:center; gap:.5rem; margin-bottom:.75rem;
}
.events-header h3{ grid-column:2; justify-self:center; margin:0; text-align:center; }

.events-list .event-item{
  display:flex; justify-content:space-between; align-items:flex-start;
  border:1px solid #eee; border-radius:12px; padding:.75rem 1rem; margin-bottom:.5rem;
}
.events-list .left{ display:flex; align-items:center; gap:.75rem; cursor:pointer; }
.events-list .badge{
  display:inline-block; font-size:.875rem;
  background:#E7F1FF; color:#0D6EFD; border:1px solid #CFE2FF;
  padding:.25rem .5rem; border-radius:8px;
}
.event-desc{ overflow:hidden; max-height:0; transition:max-height .25s ease; }
.event-desc.open{ padding-top:.5rem; }

/* Visibilidad de tabs */
.tab-content{ display:none; }
.tab-content.active{ display:block; }

/* Feedback visual en el navbar */
.profile-nav a.active{ color:#0d6efd; font-weight:600; }
